if (!window.JSON) {    window.JSON = {};}(function () {    function f(n) {        return n < 10 ? '0' + n : n;    }    if (typeof Date.prototype.toJSON !== 'function') {        Date.prototype.toJSON = function (key) {            return isFinite(this.valueOf()) ?                   this.getUTCFullYear()   + '-' +                 f(this.getUTCMonth() + 1) + '-' +                 f(this.getUTCDate())      + 'T' +                 f(this.getUTCHours())     + ':' +                 f(this.getUTCMinutes())   + ':' +                 f(this.getUTCSeconds())   + 'Z' : null;        };        String.prototype.toJSON =        Number.prototype.toJSON =        Boolean.prototype.toJSON = function (key) {            return this.valueOf();        };    }    var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,        escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,        gap,        indent,        meta = {    // table of character substitutions            '\b': '\\b',            '\t': '\\t',            '\n': '\\n',            '\f': '\\f',            '\r': '\\r',            '"' : '\\"',            '\\': '\\\\'        },        rep;    function quote(string) {        escapable.lastIndex = 0;        return escapable.test(string) ?            '"' + string.replace(escapable, function (a) {                var c = meta[a];                return typeof c === 'string' ? c :                    '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);            }) + '"' :            '"' + string + '"';    }    function str(key, holder) {        var i,          // The loop counter.            k,          // The member key.            v,          // The member value.            length,            mind = gap,            partial,            value = holder[key];        if (value && typeof value === 'object' &&                typeof value.toJSON === 'function') {            value = value.toJSON(key);        }        if (typeof rep === 'function') {            value = rep.call(holder, key, value);        }        switch (typeof value) {        case 'string':            return quote(value);        case 'number':            return isFinite(value) ? String(value) : 'null';        case 'boolean':        case 'null':            return String(value);        case 'object':            if (!value) {                return 'null';            }            gap += indent;            partial = [];            if (Object.prototype.toString.apply(value) === '[object Array]') {                length = value.length;                for (i = 0; i < length; i += 1) {                    partial[i] = str(i, value) || 'null';                }                v = partial.length === 0 ? '[]' :                    gap ? '[\n' + gap +                            partial.join(',\n' + gap) + '\n' +                                mind + ']' :                          '[' + partial.join(',') + ']';                gap = mind;                return v;            }            if (rep && typeof rep === 'object') {                length = rep.length;                for (i = 0; i < length; i += 1) {                    k = rep[i];                    if (typeof k === 'string') {                        v = str(k, value);                        if (v) {                            partial.push(quote(k) + (gap ? ': ' : ':') + v);                        }                    }                }            } else {                for (k in value) {                    if (Object.hasOwnProperty.call(value, k)) {                        v = str(k, value);                        if (v) {                            partial.push(quote(k) + (gap ? ': ' : ':') + v);                        }                    }                }            }            v = partial.length === 0 ? '{}' :                gap ? '{\n' + gap + partial.join(',\n' + gap) + '\n' +                        mind + '}' : '{' + partial.join(',') + '}';            gap = mind;            return v;        }    }    if (typeof JSON.stringify !== 'function') {        JSON.stringify = function (value, replacer, space) {            var i;            gap = '';            indent = '';            if (typeof space === 'number') {                for (i = 0; i < space; i += 1) {                    indent += ' ';                }            } else if (typeof space === 'string') {                indent = space;            }            rep = replacer;            if (replacer && typeof replacer !== 'function' &&                    (typeof replacer !== 'object' ||                     typeof replacer.length !== 'number')) {                throw new Error('JSON.stringify');            }            return str('', {'': value});        };    }    if (typeof JSON.parse !== 'function') {        JSON.parse = function (text, reviver) {            var j;            function walk(holder, key) {                var k, v, value = holder[key];                if (value && typeof value === 'object') {                    for (k in value) {                        if (Object.hasOwnProperty.call(value, k)) {                            v = walk(value, k);                            if (v !== undefined) {                                value[k] = v;                            } else {                                delete value[k];                            }                        }                    }                }                return reviver.call(holder, key, value);            }            text = String(text);            cx.lastIndex = 0;            if (cx.test(text)) {                text = text.replace(cx, function (a) {                    return '\\u' +                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);                });            }            if (/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']').replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {                j = eval('(' + text + ')');                return typeof reviver === 'function' ?                    walk({'': j}, '') : j;            }            throw new SyntaxError('JSON.parse');        };    }}());if (!window.Nova) window.Nova={};Nova.Cookie = {    set : function (name,value,days,path,domain) {        if (days) {            var date = new Date();            date.setTime(date.getTime()+(days*24*60*60*1000));            var expires = "; expires="+date.toGMTString();        }        else var expires = "";		if(path==undefined || path ==null || path==""){path="/";}		if(domain==undefined || domain ==null || domain==""){domain=".m1905.com";}        document.cookie = name+"="+value+expires+";domain="+domain+";path="+path;    },    get : function (name) {        var nameEQ = name + "=";        var ca = document.cookie.split(';');        for(var i=0;i < ca.length;i++) {            var c = ca[i];            while (c.charAt(0)==' ') c = c.substring(1,c.length);            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);        }        return null;    }}//{{{class definefunction item(){	this.videoid="";}function item_watch(){	this.cid="";	this.index="";	this.playTime="";	this.totalTime="";	this.isAuto="";}function PlayList(){}PlayList.cacheTag= new Array();//PlayList.imageQls=new Image;//PlayList.imageQls.src="";//PlayList.imageQlh=new Image;//PlayList.imageQlh.src="";//PlayList.imageQlsed=new Image;//PlayList.imageQlsed.src="";PlayList.setPosition = function(videoid,position,callback){	position=parseInt(position);	var items = this.getAll();	var items_new = new Array();	var flag=false;	var added=false;	if(position>0 && position<items.length+1){		for(i=0;i<=items.length;i++){			if(!added){				if(flag){					if(i==position){						var it = new item;						it.videoid=videoid;						items_new.push(it);						added=true;					}				}else{					if(i+1==position){						var it = new item;						it.videoid=videoid;						items_new.push(it);						added=true;					}				}			}			try{				if(videoid != items[i].videoid){					items_new.push(items[i]);				}else{					flag=true;				}			}catch(e){}		}		this.setAll(items_new);		if(callback != undefined && callback !=""){			try{				callback();			}catch(e){			}		}	}else{		alert("ä½ è¾“å…¥çš„ä½ç½®è¶…è¿‡äº†èŒƒå›?");		return false;	}}PlayList.isRemoveOnPlayComplete="";PlayList.setRemove = function(){	var isRemoveOnPlayComplete = Nova.Cookie.get("isRemoveOnPlayComplete");	if(isRemoveOnPlayComplete != "true"){		isRemoveOnPlayComplete = true;	}else{		isRemoveOnPlayComplete = false;	}	this.isRemoveOnPlayComplete = isRemoveOnPlayComplete;	Nova.Cookie.set("isRemoveOnPlayComplete",isRemoveOnPlayComplete,360);}//è®¾ç½®ä¸ºé»˜è®¤åˆ é™?PlayList.initRemove = function(){	var isRemoveOnPlayComplete = Nova.Cookie.get("isRemoveOnPlayComplete");	if(isRemoveOnPlayComplete != "true" && isRemoveOnPlayComplete!="false"){		isRemoveOnPlayComplete = true;		this.isRemoveOnPlayComplete = isRemoveOnPlayComplete;		Nova.Cookie.set("isRemoveOnPlayComplete",isRemoveOnPlayComplete,360);	}}PlayList.isAutoNextOnPlayComplete="";PlayList.setAutoNext = function(){	var isAutoNextOnPlayComplete = Nova.Cookie.get("isAutoNextOnPlayComplete");	if(isAutoNextOnPlayComplete != "true"){		isAutoNextOnPlayComplete = true;	}else{		isAutoNextOnPlayComplete = false;	}	this.isAutoNextOnPlayComplete = isAutoNextOnPlayComplete;	Nova.Cookie.set("isAutoNextOnPlayComplete",isAutoNextOnPlayComplete,360);}//è®¾ç½®ä¸ºé»˜è®¤è¿žç»­æ’­æ”?PlayList.initAutoNext = function(){	var isAutoNextOnPlayComplete = Nova.Cookie.get("isAutoNextOnPlayComplete");	if(isAutoNextOnPlayComplete != "true" && isAutoNextOnPlayComplete!="false"){		isAutoNextOnPlayComplete = true;		this.isAutoNextOnPlayComplete = isAutoNextOnPlayComplete;		Nova.Cookie.set("isAutoNextOnPlayComplete",isAutoNextOnPlayComplete,360);	}}PlayList.next = function (videoid){}//å¢žåŠ ä¸?ä¸ªè§†é¢‘åˆ°ç”¨æˆ·ç‚¹æ’­å?PlayList.add = function(videoid,title,logo){	var items = this.getAll();	try{		var i = new item;		i.videoid=videoid;		items.push(i);                //$("#PlayListFlag_" + videoid).attr('class','picvi_active');	}catch(e){	}	this.setAll(items);}PlayList.getAll = function(){	try{		var items=JSON.parse(Nova.Cookie.get("PlayList"));		if (items instanceof Array){			return items;		}else{			throw "false";		}	}catch(e){		return new Array();	}}PlayList.setAll = function(items){	try{		Nova.Cookie.set("PlayList",JSON.stringify(items),360);	}catch(e){	}}PlayList.check = function(videoid){	var items = this.getAll();	for(i=0;i<items.length;i++){		if(videoid == items[i].videoid){			return true;		}	}	return false;}PlayList.getNext = function(videoid){	var index = -1;	var items = this.getAll();	for(i=0;i<items.length;i++){		if(videoid == items[i].videoid){			index = i;			break;		}	}	index = index+1;	if(index>=items.length)		return false;		return items[index].videoid;}PlayList.del = function(videoid,callback){	var items = this.getAll();	var items_new = new Array();	for(i=0;i<items.length;i++){		if(videoid != items[i].videoid){			items_new.push(items[i]);		}	}	this.setAll(items_new);	if(callback != undefined && callback !=""){		try{			callback();                        //$("#PlayListFlag_" + videoid).attr('class','picvi_a');		}catch(e){		}	}}PlayList.clean = function(callback){	var items_new = new Array();	this.setAll(items_new);	if(callback != undefined && callback !=""){		try{			callback();		}catch(e){		}	}}PlayList.list = function (start,end){}//èŽ·å–ç”¨æˆ·çš„ç‚¹æ’­å•æ•°ç›®PlayList.getNum = function(){}PlayList.render = function(img,callback){				if(img.id==undefined){			//å‚æ•°æ˜¯ç›´æŽ¥çš„IDï¼Œå…¼å®¹ä»¥å‰æ¨¡å¼?			var videoid = img;		}else{			var tmp=img.id.split("_");			if(tmp[1]==undefined || tmp[1]==""){return;}			var videoid = tmp[1];		}		if(!this.check(videoid)){			this.add(videoid,img.title,img.src);		}else{			this.del(videoid);		}		PlayList.init();		if(callback != undefined && callback !=""){			try{				callback();			}catch(e){}		}		}PlayList.init = function(module){	try{		if(PlayList.cacheTag.length==0){			var list=[document.getElementsByTagName('div')];			var f=true;		}else{			var list = [PlayList.cacheTag];			var f=false;		}		var items = this.getAll();		var n = list.length;		while(n-- > 0) {			var n2=list[n].length;			while(n2-->0){				var inPlayList =false;				var o= list[n][n2];				if( o.id == undefined || o.id =="" )continue;								var tmp =o.id.split("_");				if(tmp[0]!="PlayListFlag" || tmp[1]==undefined || tmp[1]=="")continue;				var videoId= tmp[1];				if(f)PlayList.cacheTag=PlayList.cacheTag.concat(o);				for(var i=0;i<items.length;i++){					if(videoId == items[i].videoid){						inPlayList=true;						break;					}				}				if(o.onclick == undefined || o.onclick == "") {					o.onclick = function(){						PlayList.render(this,PlayListIndexCallback);					}				}				if(inPlayList){					o.title="ä»Žç‚¹æ’­å•ç§»é™¤";					o.onmouseout=function(){}					o.onmouseover=function(){}					if(o.nodeName.toLowerCase()=="img"){						//if(o.src.indexOf("qlus.gif")>-1)continue;						//o.style.display="block";						//o.src=PlayList.imageQlsed.src;					}else if(o.nodeName.toLowerCase()=="div"){						o.className = 'picvi_active';						o.innerHTML = 'å·²ç»åŠ å…¥æ’­æ”¾åˆ—è¡¨';					}				}else{					o.title="æ·»åŠ åˆ°ç‚¹æ’­å•";					if(o.nodeName.toLowerCase()=="img"){						//if(o.src.indexOf("qlus.gif")>-1)continue;						//o.style.display="block";						//o.src=PlayList.imageQls.src;						//o.onmouseout=function(){ this.src=PlayList.imageQls.src;}						//o.onmouseover=function(){ this.src=PlayList.imageQlh.src;}					}else if(o.nodeName.toLowerCase()=="div"){						o.className = 'picvi_a';						o.onmouseout = function(){this.className = 'picvi_a';this.innerHTML = '';};						o.onmouseover = function(){this.className = 'picvi_ahover';this.innerHTML = 'åŠ å…¥æ’­æ”¾åˆ—è¡¨';};					}				}			}		}	}catch(e){}	this.initAutoNext();	this.initRemove();}//{{{user interfacefunction PlayListIndexCallback(){	}function PlayListIndexAdd(item) {    var g = document.createElement("a");    g.href="/v/show/id/"+item.videoid;    g.innerHTML='<img style="margin:2px; padding:2px" src="'+item.logo+'" width="36" height="27" border="0" />';    document.getElementById("PlayListIndexContenter").appendChild(g);}function PlayListSave(){		if(islogin()){		PlayListSaveDialog();		}else{		login(PlayListSaveDialog);		}}function PlayListSaveDialog(r){	try{	Dialog.cancelCallback()	}catch(e){}    if(pop!=null)pop.close();    pop=new Popup({contentType:1,isSupportDraging:false,isReloadOnClose:false,width:580,height:480});    pop.setContent("title","");    pop.setContent("contentUrl", "/v/showPlayListSave");    pop.build();    pop.show();}function addHotVideoToQuickList(){		if(!PlayList) setTimeout(this.addHotVideoToQuickList, 1000);	var hotVideos = document.getElementsByName('hotVideoList');	if(undefined == hotVideos || hotVideos.length == 0) return;		for(var i=0; i<hotVideos.length; ++i){		var videoId = hotVideos[i].id;				if(!PlayList.check(videoId)) {			PlayList.add(videoId);		}	}	PlayListIndexCallback();		// å¾—åˆ°å¼?å§‹æ’­æ”¾çš„è§†é¢‘ID	var items = PlayList.getAll();	if(items.length <= 0) return;		// å¼?å§‹æ’­æ”?	window.location.href='/video/play/'+items[0].videoid+'.shtml';}//{{{è®°å½•å·²ç»æ’­æ”¾çš„è§†é¢?PlayList.addPlayed = function(o){	var key="PlayListPlayed";	var items = new Array();	try{		var items_tmp = JSON.parse(Nova.Cookie.get(key));		if (items_tmp instanceof Array){			items = items_tmp;		}	}catch(e){}	//{{{check unique	for(var i=0;i<items.length;i++){			if(					(items[i].folderid!=undefined && items[i].folderid == o.folderid)|| 				(items[i].showid!=undefined && items[i].showid== o.showid)|| 				items[i].videoid == o.videoid			){					items.splice(i,1);					break;			}	}	//}}}	try{		var i = new item;		i.videoid=o.videoid;		if(o.folderid){ i.folderid = o.folderid }		if(o.showid){ i.showid= o.showid}		if(o.order){ i.order= o.order}		if(o.pos){ i.pos = o.pos}		items.unshift(i);		items = items.slice(0,10);	}catch(e){}	Nova.Cookie.set(key,JSON.stringify(items),360);}PlayList.delPlayed = function(o){	/*	var key="PlayListPlayed";	var items = new Array();	try{		var items_tmp = JSON.parse(Nova.Cookie.get(key));		if (items_tmp instanceof Array){			items = items_tmp;		}	}catch(e){}	for(var i=0;i<items.length;i++){			if((o.folderid && items[i].folderid== o.folderid) || (o.videoid && items[i].videoid == o.videoid) || (o && items[i].videoid == o)){					items.splice(i,1);					break;			}	}	Nova.Cookie.set(key,JSON.stringify(items),360);	*/	var items = getCookieAll();    var len =items.length;    for(var i=0;i<len;i++){	  if((o && items[i][0] == o)){	    items.splice(i,1);		break;	  }	}	setCookieAll(items);}//}}}//{{{è®°å½•è§†é¢‘ä¹¦ç­¾PlayList.tag="PlayListTag";PlayList.addTag= function(o){	if(!o || !o.ns || !o.ns.time || !o.ns.alltime)return;	o.ns.time = parseInt(o.ns.time); o.ns.alltime = parseInt(o.ns.alltime);	if(o.ns.time<180 || o.ns.alltime<600)return;	if(o.ns.time>o.ns.alltime-180)return;	//if(o.ns.time>o.ns.alltime-10)return;	var items = new Array();	try{		var items_tmp = JSON.parse(Nova.Cookie.get(PlayList.tag));		if (items_tmp instanceof Array){			items = items_tmp;		}	}catch(e){}	//{{{check unique	for(var i=0;i<items.length;i++){			if(					(items[i].folderid!=undefined && items[i].folderid == o.folderid)|| 				(items[i].showid!=undefined && items[i].showid== o.showid)|| 				items[i].videoid == o.videoid			){					items.splice(i,1);					break;			}	}	//}}}	try{		var i = new item;		i.videoid=o.videoid;		if(o.folderid){ i.folderid = o.folderid }		if(o.showid){ i.showid= o.showid}		if(o.order){ i.order= o.order}		if(o.pos){ i.pos = o.pos}		if(o.ns.time){ i.sec= o.ns.time}//seconds		items.unshift(i);		items = items.slice(0,10);	}catch(e){}	Nova.Cookie.set(PlayList.tag,JSON.stringify(items),15);}PlayList.delTag= function(o){	var items = new Array();	try{		var items_tmp = JSON.parse(Nova.Cookie.get(PlayList.tag));		if (items_tmp instanceof Array){			items = items_tmp;		}	}catch(e){}	for(var i=0;i<items.length;i++){			if((o.folderid && items[i].folderid== o.folderid) || (o.videoid && items[i].videoid == o.videoid)){					items.splice(i,1);					break;			}	}	Nova.Cookie.set(PlayList.tag,JSON.stringify(items),15);}//{{{ç‚¹æ’­è¿‡çš„è§†é¢‘PlayList.addVodPlayed = function(o){	var key="vodplayed";	var items = new Array();	try{		var items_tmp = JSON.parse(Nova.Cookie.get(key));		if (items_tmp instanceof Array){			items = items_tmp;		}	}catch(e){}	//{{{check unique	for(var i=0;i<items.length;i++){			if(					(items[i].folderid!=undefined && items[i].folderid == o.folderid)|| 				(items[i].showid!=undefined && items[i].showid== o.showid)|| 				items[i].videoid == o.videoid			){					items.splice(i,1);					break;			}	}	//}}}	try{		var i = new item;		i.videoid=o.videoid;		if(o.dt){ i.dt = o.dt }				items.unshift(i);		items = items.slice(0,10);	}catch(e){}	Nova.Cookie.set(key,JSON.stringify(items),360);}$(function(){	try{		PlayList.init();		PlayListIndexCallback();		if(undefined != typeof($("#addPlaylistRDVideo")))		{			$("#addPlaylistRDVideo").click(function(){				addHotVideoToQuickList();				return false;			});			}			}catch(e){}});